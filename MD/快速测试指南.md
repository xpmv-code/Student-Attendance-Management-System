# 学生管理模块快速测试指南

## ✅ 问题已修复

已修复 Jinja2 模板中 `min` 函数未定义的问题：
- 在 `app/__init__.py` 中全局注册了 `min` 和 `max` 函数
- 现在所有模板都可以使用这些函数

## 🚀 启动系统

### 1. 确保依赖已安装
```bash
cd /Users/xpmv-mac/PycharmProjects/class
pip install -r requirements.txt
```

### 2. 初始化数据库（首次使用）
```bash
python init_db.py
```

### 3. 添加测试数据（可选）
```bash
flask add-test-data
```

### 4. 启动服务器
```bash
python run.py
```

### 5. 访问系统
浏览器打开：`http://localhost:5080`

## 📋 功能测试清单

### ✅ 基础功能测试

#### 1. 首页访问
- [ ] 访问 `http://localhost:5080`
- [ ] 查看统计数据是否正确显示
- [ ] 点击"学生管理"进入学生列表

#### 2. 学生列表页
- [ ] 访问 `/student/`
- [ ] 查看学生列表是否正常显示
- [ ] 测试搜索功能（输入学号/姓名/电话）
- [ ] 测试分页功能（如果有超过10条记录）

#### 3. 添加学生
- [ ] 点击"添加学生"按钮
- [ ] 填写表单：
  - 学号：2024001
  - 姓名：测试学生
  - 政治面貌：共青团员
  - 联系电话：13800138000
- [ ] 提交表单，查看是否成功添加
- [ ] 测试必填验证（留空必填项）
- [ ] 测试学号重复验证（添加相同学号）
- [ ] 测试电话格式验证（输入非11位数字）

#### 4. 编辑学生
- [ ] 在学生列表点击"编辑"图标
- [ ] 修改学生信息
- [ ] 验证学号不可修改
- [ ] 保存修改，查看是否成功更新

#### 5. 查看详情
- [ ] 在学生列表点击"查看详情"图标
- [ ] 查看学生基本信息
- [ ] 查看考勤统计（需要有考勤数据）
- [ ] 查看请假统计（需要有请假数据）

#### 6. 删除学生
- [ ] 在学生列表点击"删除"图标
- [ ] 确认删除对话框出现
- [ ] 点击"确认删除"
- [ ] 验证学生已被删除

#### 7. Excel 导入
- [ ] 准备测试 Excel 文件（参考 `EXCEL导入说明.md`）
- [ ] 点击"导入Excel"按钮
- [ ] 选择 Excel 文件
- [ ] 点击"开始导入"
- [ ] 查看导入结果统计
- [ ] 验证学生数据已导入

### 📝 Excel 测试文件示例

创建一个 Excel 文件（.xlsx），内容如下：

| A（学号） | B（姓名） | C（政治面貌） | D（联系电话） |
|----------|---------|------------|-------------|
| 学号     | 姓名     | 政治面貌    | 联系电话     |
| 2024101  | 张三     | 共青团员    | 13800138001 |
| 2024102  | 李四     | 群众        | 13900139002 |
| 2024103  | 王五     | 中共党员    | 13700137003 |
| 2024104  | 赵六     | 共青团员    | 13600136004 |
| 2024105  | 钱七     | 群众        | 13500135005 |

### 🧪 边界测试

#### 1. 空数据测试
- [ ] 删除所有学生，查看空列表提示

#### 2. 搜索测试
- [ ] 搜索不存在的学号
- [ ] 搜索部分姓名
- [ ] 搜索部分电话号码

#### 3. 分页测试
- [ ] 添加超过10条记录
- [ ] 测试翻页功能
- [ ] 测试跳转到最后一页

#### 4. 导入测试
- [ ] 导入空 Excel 文件
- [ ] 导入包含错误数据的 Excel
- [ ] 导入重复学号（验证更新功能）
- [ ] 导入大量数据（100+条）

## 🐛 常见问题

### 1. 数据库连接失败
确保 PostgreSQL 服务已启动，数据库 `attendance_db` 已创建

### 2. 模块导入错误
确保在虚拟环境中并已安装所有依赖：
```bash
pip install -r requirements.txt
```

### 3. 端口被占用
修改 `run.py` 中的端口号（默认 5080）

### 4. Excel 导入失败
- 检查文件格式是否为 .xlsx 或 .xls
- 检查表头是否正确（从 A1 开始）
- 检查必填字段是否完整

## ✨ 预期结果

所有测试通过后，您应该能够：
- ✅ 正常访问系统首页和学生管理页面
- ✅ 添加、编辑、删除学生信息
- ✅ 搜索和查看学生详情
- ✅ 通过 Excel 批量导入学生信息
- ✅ 查看准确的统计数据
- ✅ 所有页面响应迅速，UI 美观

## 📞 技术支持

如遇到其他问题，请检查：
1. 终端中的错误日志
2. 浏览器控制台的错误信息
3. 数据库连接配置（`config.py`）

---

**祝测试顺利！** 🎉

